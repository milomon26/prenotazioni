<!-- gestione.html -->
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestione Cute</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="dropdown-menu">
    <button class="menu-button" id="menu-button-2">Menu</button>
    <ul class="menu-list">
      <li class="menu-item" id="home-button">Home Cute</li>
    </ul>
  </nav>
  <div class="calendar-container">
    <div class="calendar-header">
      <button id="prev2-month">←</button>
      <h2 id="month2-year"></h2>
      <button id="next2-month">→</button>
    </div>
    <table class="calendar">
      <thead><tr id="day2-names"></tr></thead>
      <tbody id="calendar2-body"></tbody>
    </table>
  </div>
  <script>
    document.addEventListener('click', () => document.querySelectorAll('.dropdown-menu .menu-list').forEach(ul => ul.style.display = 'none'));
    document.getElementById('menu-button-2').addEventListener('click', e => {
      e.stopPropagation(); const ul = document.querySelector('.dropdown-menu .menu-list');
      ul.style.display = ul.style.display === 'block' ? 'none' : 'block';
    });
    document.getElementById('home-button').addEventListener('click', () => window.location.href = 'index.html');

    function calculateEaster(year) {
      const a = year % 19;
      const b = Math.floor(year / 100);
      const c = year % 100;
      const d = Math.floor(b / 4);
      const e = b % 4;
      const f = Math.floor((b + 8) / 25);
      const g = Math.floor((b - f + 1) / 3);
      const h = (19 * a + b - d - g + 15) % 30;
      const i = Math.floor(c / 4);
      const k = c % 4;
      const L = (32 + 2 * e + 2 * i - h - k) % 7;
      const m = Math.floor((a + 11 * h + 22 * L) / 451);
      const month = Math.floor((h + L - 7 * m + 114) / 31);
      const day = ((h + L - 7 * m + 114) % 31) + 1;
      return new Date(year, month - 1, day);
    }
    function getItalianHolidays(year) {
      const easter = calculateEaster(year);
      const easterMon = new Date(easter);
      easterMon.setDate(easter.getDate() + 1);
      const fixed = [
        new Date(year, 0, 1), new Date(year, 0, 6),
        new Date(year, 3, 25), new Date(year, 4, 1),
        new Date(year, 5, 2), new Date(year, 7, 15),
        new Date(year, 10, 1), new Date(year, 11, 8),
        new Date(year, 11, 25), new Date(year, 11, 26)
      ];
      return [easter, easterMon, ...fixed].map(d =>
        `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`
      );
    }
    function renderCalendar2() {
      const today = window.calendar2Date;
      const year = today.getFullYear();
      const month = today.getMonth();
      const holidays = getItalianHolidays(year);
      const monthName = today.toLocaleString('it-IT', { month: 'long' });
      document.getElementById('month2-year').textContent =
        monthName.charAt(0).toUpperCase() + monthName.slice(1) + ' ' + year;
      const head = document.getElementById('day2-names'); head.innerHTML = '';
      ['Lunedì','Martedì','Mercoledì','Giovedì','Venerdì','Sabato','Domenica']
        .forEach(d => { const th = document.createElement('th'); th.textContent = d; head.appendChild(th); });
      const firstDay = new Date(year, month, 1);
      const start = (firstDay.getDay() + 6) % 7;
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const rows = Math.ceil((start + daysInMonth) / 7);
      const body = document.getElementById('calendar2-body'); body.innerHTML = '';
      let d = 1;
      for (let i = 0; i < rows; i++) {
        const tr = document.createElement('tr');
        for (let j = 0; j < 7; j++) {
          const td = document.createElement('td');
          const idx = i * 7 + j;
          if (idx < start || d > daysInMonth) td.textContent = '';
          else {
            const ds = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            td.textContent = d;
            if (j === 6) td.classList.add('sunday');
            if (holidays.includes(ds)) td.classList.add('holiday');
            d++;
          }
          tr.appendChild(td);
        }
        body.appendChild(tr);
      }
    }
    window.calendar2Date = new Date();
    document.getElementById('prev2-month').addEventListener('click', () => { window.calendar2Date.setMonth(window.calendar2Date.getMonth() - 1); renderCalendar2(); });
    document.getElementById('next2-month').addEventListener('click', () => { window.calendar2Date.setMonth(window.calendar2Date.getMonth() + 1); renderCalendar2(); });
    renderCalendar2();
  </script>
