<!-- gestione.html -->
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestione Cute</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="dropdown-menu">
    <button class="menu-button" id="menu-button-2">Menu ▼</button>
    <ul class="menu-list">
      <li class="menu-item" id="home-button">Home Cute</li>
    </ul>
  </nav>

  <div class="calendar-container">
    <div class="calendar-header">
      <button id="prev2-month">&#8592;</button>
      <h2 id="month2-year"></h2>
      <button id="next2-month">&#8594;</button>
    </div>
    <table class="calendar">
      <thead>
        <tr id="day2-names"></tr>
      </thead>
      <tbody id="calendar2-body"></tbody>
    </table>
  </div>

  <script>
    // Menu gestione click-to-open
    document.addEventListener('click', () => {
      document.querySelectorAll('.dropdown-menu .menu-list').forEach(ul => ul.style.display = 'none');
    });
    document.getElementById('menu-button-2').addEventListener('click', e => {
      e.stopPropagation();
      const ul = document.querySelector('.dropdown-menu .menu-list');
      ul.style.display = (ul.style.display === 'block') ? 'none' : 'block';
    });
    document.getElementById('home-button').addEventListener('click', () => window.location.href = 'index.html');

    // Funzioni calendario (stessi di index)
    " + // remove quotes placeholder
    "
    function calculateEaster(year) { /* same code as above */ }
    function getItalianHolidays(year) { /* same code as above */ }
    function renderCalendar2() {
      const today = window.calendar2Date;
      const year = today.getFullYear(), month = today.getMonth();
      const holidays = getItalianHolidays(year);
      let mn = today.toLocaleString('it-IT',{month:'long'});
      mn = mn.charAt(0).toUpperCase() + mn.slice(1);
      document.getElementById('month2-year').textContent = `${mn} ${year}`;
      const names = ['Lunedì','Martedì','Mercoledì','Giovedì','Venerdì','Sabato','Domenica'];
      const head = document.getElementById('day2-names'); head.innerHTML = '';
      names.forEach(n=>{const th=document.createElement('th');th.textContent=n;head.appendChild(th);});
      const first=new Date(year,month,1),start=(first.getDay()+6)%7,dim=new Date(year,month+1,0).getDate();
      const total=start+dim,rows=Math.ceil(total/7),body=document.getElementById('calendar2-body'); body.innerHTML='';
      let d=1;
      for(let i=0;i<rows;i++){const row=document.createElement('tr');for(let j=0;j<7;j++){const cell=document.createElement('td'),idx=i*7+j;if(idx<start||d>dim){cell.textContent='';}else{const ds=`${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;cell.textContent=d;if(j===6)cell.classList.add('sunday');if(holidays.includes(ds))cell.classList.add('holiday');d++;}row.appendChild(cell);}body.appendChild(row);} }
    window.calendar2Date=new Date();
    document.getElementById('prev2-month').addEventListener('click',()=>{window.calendar2Date.setMonth(window.calendar2Date.getMonth()-1);renderCalendar2();});
    document.getElementById('next2-month').addEventListener('click',()=>{window.calendar2Date.setMonth(window.calendar2Date.getMonth()+1);renderCalendar2();});
    renderCalendar2();
  </script>
</body>
</html>
