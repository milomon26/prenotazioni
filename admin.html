<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin – Prenotazioni</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Loader -->
  <div id="loader"><div class="spinner"></div></div>

  <!-- Topbar login / strumenti -->
  <header class="topbar">
    <div id="login-controls">
      <input type="text" id="admin-username" placeholder="Username" autocomplete="off">
      <input type="password" id="admin-password" placeholder="Password" autocomplete="off">
      <button id="admin-login-btn" class="btn">Login</button>
    </div>
    <div id="admin-tools" style="display:none">
      <button id="wizard-btn" class="btn">Wizard</button>
      <button id="logout-btn" class="btn">Logout</button>
    </div>
  </header>

  <!-- Calendario Admin -->
  <main>
    <div id="calendar-container"></div>
  </main>

  <!-- (tutti i modal come già visto: wizard, timepicker, more, confirm, info) -->
  <!-- ASSICURATI che la funzione getHolidays in admin.html sia la stessa di index.html -->

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import {
      getFirestore, collection, getDocs, query, where,
      addDoc, updateDoc, deleteDoc, doc, onSnapshot, getDoc
    } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    initializeApp({
      apiKey:            "AIzaSyBTc-IEX2IlfQwL2n-r-lbWepxys0dEco",
      authDomain:        "prenotazioni-app-87467.firebaseapp.com",
      projectId:         "prenotazioni-app-87467",
      storageBucket:     "prenotazioni-app-87467.appspot.com",
      messagingSenderId: "322391103742",
      appId:             "1:322391103742:web:6f74e033b57281bdaaedaf"
    });
    const db = getFirestore();

    function calculateEaster(Y){
      const a=Y%19,b=Math.floor(Y/100),c=Y%100,
            d=Math.floor(b/4),e=b%4,
            f=Math.floor((b+8)/25),
            g=Math.floor((b-f+1)/3),
            h=(19*a+b-d-g+15)%30,
            i=Math.floor(c/4),k=c%4,
            L=(32+2*e+2*i-h-k)%7,
            m=Math.floor((a+11*h+22*L)/451),
            month=Math.floor((h+L-7*m+114)/31),
            day=((h+L-7*m+114)%31)+1;
      return new Date(Y,month-1,day);
    }
    function getHolidays(Y){
      const pad=n=>String(n).padStart(2,'0'),
            eas=calculateEaster(Y),
            em=eas.getMonth()+1, ed=eas.getDate(),
            pas=`${Y}-${pad(em)}-${pad(ed)}`,
            ang=new Date(eas);
      ang.setDate(ed+1);
      const am=ang.getMonth()+1, ad=ang.getDate(),
            pasq=`${Y}-${pad(am)}-${pad(ad)}`;
      return [
        `${Y}-01-01`,
        `${Y}-01-06`,
        pas,
        pasq,
        `${Y}-04-25`,
        `${Y}-05-01`,
        `${Y}-06-02`,
        `${Y}-06-29`,
        `${Y}-08-15`,
        `${Y}-11-01`,
        `${Y}-12-08`,
        `${Y}-12-25`,
        `${Y}-12-26`
      ];
    }

    // ... tutto il resto di renderCalendar(), attachWizardLogic(), deleteSlot(), openInfoModal(), ecc. ...
  </script>
</body>
</html>
